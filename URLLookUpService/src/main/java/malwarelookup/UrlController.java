package malwarelookup;



import java.util.logging.Logger;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;



/**
 * REST controller
 */
@RestController
@RequestMapping("/urlinfo")
public class UrlController {

	protected Logger logger = Logger.getLogger(UrlController.class.getName());
	protected URLRepositry urlRepository;
	
	
	@Autowired
	public UrlController(URLRepositry urlRepository) {
		this.urlRepository = urlRepository;

	}
	
	
	 @RequestMapping("/1/{hostname_port}/{url_query}") 
	 // Not dealing with hostname and port here , will directly work on url as simple solution first   
	 public String findById(@PathVariable("hostname_port") String hostname_port,@PathVariable("url") String url) {

		 
		 logger.info("urlinfo-service findById() invoked: " + url);
		 
		 URLEntity Url = urlRepository.findById(url);
	    	
		 if (Url.getStaus() == null)
				throw new UrlNotFoundException(Url.toString());
			else {
				 return Url.getStaus(); //  will return secure unsecure on basis of fixed value inserted in table
			}	
	    	
	    }
}

